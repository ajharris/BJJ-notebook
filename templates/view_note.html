{% extends "base.html" %}

{% block title %}BJJ Notebook - {{ note.title }}{% endblock %}

{% block content %}
<div class="page-header">
    <h1>üìù {{ note.title }}</h1>
    <div class="note-actions">
        <a href="{{ url_for('notes') }}" class="btn btn-secondary">Back to Notes</a>
    </div>
</div>

<div class="note-view">
    <div class="note-metadata">
        <p><strong>Created:</strong> {{ note.created_at }}</p>
        <p><strong>Updated:</strong> {{ note.updated_at }}</p>
        <p><strong>Category:</strong> <span class="category-badge">{{ note.category|default('general')|title }}</span></p>
        {% if note.tags %}
        <div class="note-tags">
            <strong>Tags:</strong>
            {% for tag in note.tags %}
            <span class="tag">{{ tag }}</span>
            {% endfor %}
        </div>
        {% endif %}
    </div>
    
    <div class="note-content">
        <h3>Content:</h3>
        <div class="note-text">
            {{ note.content|replace('\n', '<br>') }}
        </div>
    </div>
    
    {% if related_notes %}
    <div class="related-notes">
        <h3>Related Notes</h3>
        <p class="related-notes-desc">Notes with similar topics or in the same category</p>
        <div class="related-notes-list">
            {% for related in related_notes %}
            <div class="related-note-item">
                <a href="{{ url_for('view_note', note_id=related.id) }}" class="related-note-link">
                    <strong>{{ related.title }}</strong>
                </a>
                <div class="related-info">
                    <span class="related-category">üìÇ {{ related.category|title }}</span>
                    {% if related.common_tags %}
                    <span class="related-tags">
                        üè∑Ô∏è Common tags: {{ related.common_tags|join(', ') }}
                    </span>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}
